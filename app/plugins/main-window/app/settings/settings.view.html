<div layout-padding>
    <form name="settingsForm" novalidate ng-submit="settingsForm.$valid && settingsCtrl.saveSettings()">

        <md-card>
            <md-card-content>
                <h2>Workday</h2>

                <p layout="row">
                    <md-input-container>
                        <label>Start</label>
                        <input type="text" ng-model="settingsCtrl.workSettings.workDayStartTime" ui-time-mask="short"/>
                    </md-input-container>
                    <md-input-container>
                        <label>End</label>
                        <input type="text" ng-model="settingsCtrl.workSettings.workDayEndTime" ui-time-mask="short"/>
                    </md-input-container>
                </p>
                <p layout="row">
                    <md-input-container>
                        <label>Split task after idling for minutes</label>
                        <input type="number" ng-model="settingsCtrl.workSettings.splitTaskAfterIdlingForMinutes" />
                    </md-input-container>
                </p>
            </md-card-content>
        </md-card>
        <md-card>
            <md-card-content>
                <h2>Analyser settings</h2>

                <p layout="row">

                <div ng-repeat="item in settingsCtrl.analyserSettings track by $index">
                    <md-input-container>
                        <label>RegEx to find task</label>
                        <input type="text" ng-model="item.findRe"/>
                    </md-input-container>
                    <md-input-container>
                        <label>RegEx for group</label>
                        <input type="text" ng-model="item.takeGroup"/>
                    </md-input-container>
                    <md-input-container>
                        <label>RegEx for title</label>
                        <input type="text" ng-model="item.takeTitle"/>
                    </md-input-container>
                    <md-input-container>
                        <md-switch ng-model="item.active">{{item.active ? "Active" : "Disabled"}}</md-switch>
                    </md-input-container>
                    <md-button class="md-icon-button" aria-label="Delete" ng-click="settingsCtrl.removeAnalyserItem($index)">
                        <md-icon md-font-set="material-icons">delete</md-icon>
                    </md-button>
                    <md-button ng-click="settingsCtrl.testAnalyserItem(item, $index)">
                        Test
                    </md-button>
                    <div ng-repeat="aItem in settingsCtrl.analyserTestItems[$index]">
                        <div ng-bind="aItem.title"></div>
                    </div>
                </div>

                <md-button ng-click="settingsCtrl.addNewAnalyserItem()">
                    Add new
                </md-button>


                </p>

            </md-card-content>
        </md-card>
        <md-button type="submit">
            Save
        </md-button>
    </form>
</div>

