<template>
  <require from="./timeline-component"></require>
  <require from="nvd3/nv.d3.min.css"></require>
  <section class="au-animate">
    <div class="row" style="margin:0">
      <div class="col s1">
        <a class="btn-flat waves-effect btn-floating" click.delegate="refresh()">
          <i class="material-icons blue-text">refresh</i></a>
      </div>
      <div class="col s1">
        <a class="btn-flat waves-effect btn-floating" click.delegate="dayBack()">
          <i class="material-icons blue-text">arrow_back</i></a>
      </div>
      <div class="col s2" ref="dpWrapper">
        <input md-datepicker="container.bind: dpWrapper; value.two-way: searchDate;" type="date" placeholder="Search for day" />

      </div>
      <div class="col s1">
        <a class="btn-flat waves-effect btn-floating" click.delegate="dayForward()">
          <i class="material-icons blue-text">arrow_forward</i></a>
      </div>

    </div>
    <div id="trackItemMiniEdit" if.bind="selectedTrackItem" css.bind="{left:selectedTrackItem.left, top:selectedTrackItem.top}">
      <form>
        <div class="row">
          <div class="col s2">
            <md-input md-placeholder="Group" md-value.bind="selectedTrackItem.app"></md-input>
          </div>
          <div class="col s6">
            <md-input md-placeholder="Title" md-value.bind="selectedTrackItem.title"></md-input>
          </div>
          <div class="col s1">
            <md-input md-type="color" md-value.bind="selectedTrackItem.color"></md-input>
          </div>
          <div class="col s1">
            <a class="btn-flat waves-effect btn-floating" click.delegate="saveTrackItem(selectedTrackItem)">
              <i class="material-icons blue-text">play_circle_filled</i></a>
          </div>
          <div class="col s1" if.bind="selectedTrackItem.id">
            <a class="btn-flat waves-effect btn-floating" click.delegate="deleteTrackItem(selectedTrackItem)">
              <i class="material-icons red-text">delete</i></a>
          </div>
          <div class="col s1">
            <a class="btn-flat waves-effect btn-floating" click.delegate="closeMiniEdit()">
              <i class="material-icons black-text">close</i></a>
          </div>
        </div>
      </form>

    </div>
    <timeline-component selected-track-item.bind="selectedTrackItem" start-date.bind="searchDate" on-zoom-changed.bind="onZoomChanged"
      zoom-scale.bind="zoomScale" zoom-x.bind="zoomX"></timeline-component>
    <div class="row" style="min-height:200px">
      <md-card class="col s4">
        <nvd3 options.bind="pieOptions" data-list.bind="pieData['AppTrackItem']"></nvd3>
      </md-card>
       <md-card class="col s4">
        <nvd3 options.bind="pieOptions" data-list.bind="pieData['LogTrackItem']"></nvd3>
      </md-card>
       <md-card class="col s4">
        <nvd3 options.bind="pieOptions" data-list.bind="pieData['StatusTrackItem']"></nvd3>
      </md-card>
    </div>
  </section>
</template>