<template>

  <section class="au-animate">


    <md-card md-title="Workday">
      <div>
        <div class="form-group">
          <div class="row">
            <div class="col s6">
              <md-input md-label="Start" md-value.bind="workSettings.workDayStartTime"></md-input>
            </div>
            <div class="col s6">
              <md-input md-label="End" md-value.bind="workSettings.workDayEndTime"></md-input>
            </div>
          </div>
          <div class="row">
            <div class="col s6">
              <md-input md-type="number" md-label="Split task after idling for minutes" md-value.bind="workSettings.splitTaskAfterIdlingForMinutes"></md-input>
            </div>
          </div>
          <button md-button="flat: true;" click.delegate="defaultWorkSettings()">Defaults</button>
        </div>
      </div>
    </md-card>


    <md-card md-title="Analyser settings">
      <div repeat.for="item of analyserSettings">
        <div class="form-group">
          <div class="row">
            <div class="col s3">
              <md-input md-label="RegEx to find task" md-value.bind="item.findRe"></md-input>
            </div>
            <div class="col s2">
              <md-input md-label="RegEx for group" md-value.bind="item.takeGroup"></md-input>
            </div>
            <div class="col s3">
              <md-input md-label="RegEx for title" md-value.bind="item.takeTitle"></md-input>
            </div>
            <div class="col s2" style="margin-top: 10px;">
              <md-switch md-label-on="Active" md-label-off="Disabled" md-checked.bind="item.active"></md-switch>

            </div>
            <div class="col s2">
              <a class="btn-flat waves-effect btn-floating" click.delegate="removeAnalyserItem($index)">
                <i class="zmdi zmdi-delete black-text"></i></a>
              <a class="btn-flat waves-effect btn-floating" click.delegate="testAnalyserItem(item, $index)">
                <i class="zmdi zmdi-run black-text"></i></a>
            </div>


            <div class="col s12" if.bind="lastAnalyserTestItemIndex==$index && analyserTestItems.length==0">No items found</div>
            <div class="col s12" if.bind="lastAnalyserTestItemIndex==$index" repeat.for="aItem of analyserTestItems">
              <div><b>${aItem.title}</b></div>
              <div>
                <span>${aItem.findRe}</span> <i>|</i>
                <span>${aItem.takeGroup}</span> <i>|</i>
                <span>${aItem.takeTitle}</span>
              </div>
            </div>
          </div>


        </div>
      </div>
      <button md-button="" click.delegate="addNewAnalyserItem()">Add new</button>
      <button md-button="flat: true;" click.delegate="addDefaultAnalyserSettings()">Add default analysers</button>
    </md-card>

    <button md-button="" click.delegate="saveSettings()">Save</button>
    </div>
  </section>
</template>